% klartex-klausuler.sty - Legal clause numbering component
% Provides clause/subclause environments and \clause command
%
% Usage: \usepackage{klartex-klausuler}

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{klartex-klausuler}[2026/02/18 Klartex Clause Numbering Component]

% Dependencies
\RequirePackage{enumitem}

% Legal clause numbering
\newcounter{clausecounter}
\newcounter{subclausecounter}[clausecounter]

\newlist{clauses}{enumerate}{1}
\setlist[clauses]{
    label=\textbf{\arabic{clausecounter}.},
    ref=\arabic{clausecounter},
    leftmargin=1.0cm,
    labelwidth=0.76cm,
    labelsep=0.24cm,
    itemindent=0pt,
    align=left,
    before=\setcounter{clausecounter}{0},
    itemsep=20pt,
    parsep=0pt,
    topsep=12pt
}
\newcommand{\clause}[1]{\stepcounter{clausecounter}\item \textbf{#1}}

% Subclauses: single list with 4 nestable levels.
% LaTeX tracks depth automatically â€” just nest \begin{subclauses} inside itself.
\newlist{subclauses}{enumerate}{4}
% leftmargin is cumulative (added to parent's indent), so each level only
% needs enough for its own label + a small extra indent step (~0.3cm).
%   Level 1: "3.1."         labelwidth=1.0cm
%   Level 2: "3.1.2."       labelwidth=1.3cm  (+0.3cm indent)
%   Level 3: "3.1.2.1."     labelwidth=1.6cm  (+0.3cm indent)
%   Level 4: "3.1.2.1.3."   labelwidth=1.9cm  (+0.3cm indent)
\setlist[subclauses,1]{
    label=\arabic{clausecounter}.\arabic*.,
    ref=\arabic{clausecounter}.\arabic*,
    leftmargin=0.6cm,
    labelwidth=1.0cm,
    labelsep=0.1cm,
    align=left,
    itemsep=0.5em,
    parsep=0pt,
    topsep=0.5em
}
\setlist[subclauses,2]{
    label=\arabic{clausecounter}.\arabic{subclausesi}.\arabic*.,
    ref=\arabic{clausecounter}.\arabic{subclausesi}.\arabic*,
    leftmargin=0.6cm,
    labelwidth=1.3cm,
    labelsep=0.1cm,
    align=left,
    itemsep=0.3em,
    parsep=0pt,
    topsep=0.3em
}
\setlist[subclauses,3]{
    label=\arabic{clausecounter}.\arabic{subclausesi}.\arabic{subclausesii}.\arabic*.,
    ref=\arabic{clausecounter}.\arabic{subclausesi}.\arabic{subclausesii}.\arabic*,
    leftmargin=0.6cm,
    labelwidth=1.6cm,
    labelsep=0.1cm,
    align=left,
    itemsep=0.3em,
    parsep=0pt,
    topsep=0.3em
}
\setlist[subclauses,4]{
    label=\arabic{clausecounter}.\arabic{subclausesi}.\arabic{subclausesii}.\arabic{subclausesiii}.\arabic*.,
    ref=\arabic{clausecounter}.\arabic{subclausesi}.\arabic{subclausesii}.\arabic{subclausesiii}.\arabic*,
    leftmargin=0.6cm,
    labelwidth=1.9cm,
    labelsep=0.1cm,
    align=left,
    itemsep=0.3em,
    parsep=0pt,
    topsep=0.3em
}

\endinput
